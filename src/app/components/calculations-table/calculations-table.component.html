<mat-card class="card">
  <mat-card-header>
    <mat-card-title>Account Growth</mat-card-title>
    <mat-card-subtitle>
      Calculations based on your investment plan.
    </mat-card-subtitle>
  </mat-card-header>
  <mat-card-content>
    <cdk-accordion class="accordion">
      <cdk-accordion-item
        #accordionItem="cdkAccordionItem"
        class="accordion-item"
        role="button"
        tabindex="0"
        [attr.id]="'accordion-header-' + -1"
        [attr.aria-expanded]="accordionItem.expanded"
        [attr.aria-controls]="'accordion-body-' + -1">
        <div class="accordion-item-header column-names" (click)="accordionItem.toggle()">
          <span class="accordion-item-column chevron-col align-start no-grow">
            <mat-icon
              aria-hidden="false"
              aria-label="Expand icon"
              [fontIcon]="'event'"
            ></mat-icon>
          </span>
          <span class="accordion-item-column align-start day-col">Day</span>
          <span class="accordion-item-column align-start date-col">Date</span>
          <span class="accordion-item-column align-end balance-col">Balance<br>(Locked Value)</span>
          <span class="accordion-item-column align-end yield-percent-col">Earnings<br>(Daily %)</span>
          <span class="accordion-item-column align-end yield-today-col">Earnings<br>Today</span>
          <span class="accordion-item-column align-end yield-avail-col">Earnings<br>Available</span>
          <span class="accordion-item-column align-end action-col">User<br>Action</span>
          <span class="accordion-item-column align-end withdrawn-col">Withdrawn<br>Today</span>
          <span class="accordion-item-column align-end deposited-col">Deposited<br>Today</span>
          <span class="accordion-item-column align-end compounded-col">Compounded<br>Today</span>
          <span class="accordion-item-column align-end difference-col">Balance<br>Change</span>
          <span class="accordion-item-column align-end tot-withdraw-col">Total<br>Withdrawn</span>
          <span class="accordion-item-column align-end tot-deposit-col">Total<br>Deposited</span>
          <span class="accordion-item-column align-end tot-compound-col">Total<br>Compounded</span>
        </div>
      </cdk-accordion-item>
      <cdk-accordion-item
        *ngFor="let item of dailyData; let index = index;"
        #accordionItem="cdkAccordionItem"
        class="accordion-item"
        role="button"
        tabindex="0"
        [attr.id]="'accordion-header-' + index"
        [attr.aria-expanded]="accordionItem.expanded"
        [attr.aria-controls]="'accordion-body-' + index">
        <div class="accordion-item-header" (click)="accordionItem.toggle()">
          <span class="accordion-item-column chevron-col align-start no-grow">
              <mat-icon
                aria-hidden="false"
                aria-label="Expand icon"
                [fontIcon]="accordionItem.expanded ? 'expand_more' : 'chevron_right' "
              ></mat-icon>
          </span>
          <span class="accordion-item-column align-start day-col">{{ index }}</span>
          <span class="accordion-item-column align-start date-col">{{ item.date }}</span>
          <span class="accordion-item-column align-end balance-col bold">{{ item.balance }}$</span>
          <span class="accordion-item-column align-end yield-percent-col">{{ item.rewardsPercent }}%</span>
          <span class="accordion-item-column align-end yield-today-col">{{ item.rewardsUnlockedToday }}$</span>
          <span class="accordion-item-column align-end yield-avail-col">{{ item.rewardsAvailable }}$</span>
          <span class="accordion-item-column align-end action-col">{{ item.actionMade }}</span>
          <span class="accordion-item-column align-end withdrawn-col">{{ item.withdrawnToday }}$</span>
          <span class="accordion-item-column align-end deposited-col">{{ item.depositedToday }}$</span>
          <span class="accordion-item-column align-end compounded-col">{{ item.compoundedToday }}$</span>
          <span class="accordion-item-column align-end difference-col bold">
            {{ item.balanceDifference >= 0 ? "+" : null }}{{ item.balanceDifference }}$
          </span>
          <span class="accordion-item-column align-end tot-withdraw-col">{{ item.totalWithdrawn }}$</span>
          <span class="accordion-item-column align-end tot-deposit-col">{{ item.totalDeposited }}$</span>
          <span class="accordion-item-column align-end tot-compound-col">{{ item.totalCompounded }}$</span>
        </div>
        <div
          class="accordion-item-body"
          role="region"
          [style.display]="accordionItem.expanded ? '' : 'none'"
          [attr.id]="'accordion-body-' + index"
          [attr.aria-labelledby]="'accordion-header-' + index">
          <!--          <div class="summary">-->
          <!--            <h3>Summary:</h3>-->
          <!--            <p>-->
          <!--              On {{item.date}},-->
          <!--              you {{item.actionMade === "Hold" ? "held your balance" : item.actionMade + "ed"}}-->
          <!--              {{item.actionMade !== "Hold" ? (item.depositedToday || item.withdrawnToday) + "$" : ""}} and ended the day-->
          <!--              with {{item.newBalance}}$.-->
          <!--            </p>-->
          <!--          </div>-->

          <div class="rewards-info" style="margin-top: 1rem;">
            <h3>Rewards Information</h3>
            <table>
              <tr>
                <td>Daily earnings rate:</td>
                <td>{{item.rewardsPercent}}%</td>
              </tr>
              <tr>
                <td>Earnings unlocked today:</td>
                <td>{{item.rewardsUnlockedToday}}$</td>
              </tr>
              <tr>
                <td>Earnings available to claim or withdraw:</td>
                <td>{{item.rewardsAvailable}}$</td>
              </tr>
            </table>
          </div>

          <div class="balance-breakdown" style="margin-top: 1rem;">
            <h3>Balance Breakdown:</h3>
            <table>
              <tr>
                <td>Balance at start of day:</td>
                <td>{{item.balance}}$</td>
              </tr>
              <tr>
                <td>Action you made:</td>
                <td>{{item.actionMade === "Hold" ? "Held balance" : item.actionMade + "ed " + (item.depositedToday || item.withdrawnToday) + "$"}}</td>
              </tr>
              <tr>
                <td>Balance at end of day:</td>
                <td>{{item.newBalance}}$</td>
              </tr>
              <tr>
                <td>Balance change today:</td>
                <td>{{item.balanceDifference}}$</td>
              </tr>
            </table>
          </div>

          <div class="return-on-investment" style="margin-top: 1rem;">
            <h3>Return on Investment:</h3>
            <table>
              <tr>
                <td>Total Deposited:</td>
                <td>{{item.totalDeposited}}$</td>
              </tr>
              <tr>
                <td>Total Withdrawn:</td>
                <td>{{item.totalWithdrawn}}$</td>
              </tr>
              <tr>
                <td>Realized Profit:</td>
                <td>{{item.realizedProfit}}$</td>
              </tr>
              <tr>
                <td>Realized Profit Percent:</td>
                <td>{{item.realizedProfitPercent}}%</td>
              </tr>
              <tr>
                <td>Unrealized Profit:</td>
                <td>{{item.unrealizedProfit}}$</td>
              </tr>
              <tr>
                <td>Unrealized Profit Percent:</td>
                <td>{{item.unrealizedProfitPercent}}%</td>
              </tr>
            </table>
          </div>
        </div>
      </cdk-accordion-item>
    </cdk-accordion>
  </mat-card-content>
</mat-card>
